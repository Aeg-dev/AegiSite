<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://aeg-dev.github.io/AegiSite/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aeg-dev.github.io/AegiSite/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://aeg-dev.github.io/AegiSite/main.fa2ec43ae1b847039e1d1361782f0c3426397729912cb579510777745c5642a5253898bb2423a0355e7a1a0b5e3076f5ecd4630445de5c4a51a7b65253a95460.css integrity="sha512-+i7EOuG4RwOeHRNheC8MNCY5dymRLLV5UQd3dFxWQqUlOJi7JCOgNV56GgteMHb17NRjBEXeXEpRp7ZSU6lUYA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>- Aegisub</title><meta name=description content="Aegisub is a free, cross-platform open source tool for creating and modifying subtitles. Aegisub makes it quick and easy to time subtitles to audio, and features many powerful tools for styling them, including a built-in real-time video preview."><link rel=canonical href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/lua/progress_reporting/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/doks.png"><meta name=twitter:title content><meta name=twitter:description content="There functions are used to report various status and progress back to the GUI while a script is running.
Progress reporting A progress dialogue box is always shown when an Automation 4 Lua script is running. You can use these functions to control what is displayed in it.
aegisub.progress.set Synopsis: aegisub.progress.set(percent)
Set the position of the percent-done bar in the progress window.
 percent (number) Number from 0 to 100.  aegisub."><meta name=twitter:site content="@henkverlinde"><meta name=twitter:creator content="@henkverlinde"><meta property="og:title" content><meta property="og:description" content="There functions are used to report various status and progress back to the GUI while a script is running.
Progress reporting A progress dialogue box is always shown when an Automation 4 Lua script is running. You can use these functions to control what is displayed in it.
aegisub.progress.set Synopsis: aegisub.progress.set(percent)
Set the position of the percent-done bar in the progress window.
 percent (number) Number from 0 to 100.  aegisub."><meta property="og:type" content="article"><meta property="og:url" content="/zh-cn/docs/3.2/automation/lua/progress_reporting/"><meta property="og:image" content="/zh-cn/doks.png"><meta property="og:site_name" content="Aegisub"><meta property="article:publisher" content="https://www.facebook.com/verlinde.henk"><meta property="article:author" content="https://www.facebook.com/verlinde.henk"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/aeg-dev.github.io\/AegiSite\/"},{"@type":"ListItem","position":3,"name":"Zh Cn","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/zh-cn\/"},{"@type":"ListItem","position":4,"name":"Docs","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/zh-cn\/docs\/"},{"@type":"ListItem","position":5,"name":"3.2","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/zh-cn\/docs\/3.2\/"},{"@type":"ListItem","position":6,"name":"Automation","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/zh-cn\/docs\/3.2\/automation\/"},{"@type":"ListItem","position":7,"name":"Lua","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/zh-cn\/docs\/3.2\/automation\/lua\/"},{"@type":"ListItem","position":8,"name":"Progress Reporting","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/zh-cn\/docs\/3.2\/automation\/lua\/progress_reporting\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://aeg-dev.github.io/AegiSite/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://aeg-dev.github.io/AegiSite/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://aeg-dev.github.io/AegiSite/favicon-16x16.png><link rel=manifest href=https://aeg-dev.github.io/AegiSite/site.webmanifest><meta http-equiv=refresh content="0; url=https://aegisub.org//zh-cn/docs/latest/automation/lua/progress_reporting/"></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label>
<a class="navbar-brand order-1 order-md-0 me-auto" href=https://aeg-dev.github.io/AegiSite/zh-cn/>Aegisub</a><div class="order-1 order-md-3"><div class=input-group><select class=custom-select id=inputGroupSelect-language-switching onchange="location=this.value"><option id=en value=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/lua/progress_reporting/>English</option><option id=zh-cn value=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/lua/progress_reporting/ selected>简体中文</option></select></div></div><button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/Aegisub/Aegisub><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2 text-nowrap"><li class=nav-item><a class=nav-link href=https://aeg-dev.github.io/AegiSite/zh-cn/downloads/main/>下载</a></li><li class=nav-item><a class=nav-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/>文档</a></li><li class=nav-item><a class=nav-link href=https://github.com/Aegisub/Aegisub/issues>Bug 追踪</a></li><li class=nav-item><a class=nav-link href=https://aeg-dev.github.io/AegiSite/zh-cn/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=http://blog.aegisub.org/>旧新闻</a></li></ul><div class="break order-6 d-md-none"></div></div></div></header><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Navigation</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/main_page/>Main Page</a></li></ul><h3>Introduction</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/about/>What is Aegisub?</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/highlights/>Highlights</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/credits/>Credits</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/support/>Support Aegisub</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/faq/>FAQ</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/tutorials/>Tutorials</a></li></ul><h3>Working with Subtitles</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/editing_subtitles/>Editing Subtitles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/exporting/>Exporting Subtitles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/attaching_subtitles_to_video/>Applying Subtitles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/spell_checker/>Spell Checker</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/translation_assistant/>Translation Assistant</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/paste_over/>Paste Over</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/select_lines/>Select Lines</a></li></ul><h3>Typesetting</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/typesetting/>Typesetting Introduction</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/video/>Working with Video</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/styles/>Editing styles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/visual_typesetting/>Visual Typesetting</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/ass_tags/>ASS Override Tags</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/colour_picker/>Colour Picker</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/styling_assistant/>Styling Assistant</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/resolution_resampler/>Resolution Resampler</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/fonts_collector/>Fonts Collector</a></li></ul><h3>Timing</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/audio/>Working with Audio</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/timing/>Timing subtitles to audio</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/shift_times/>Shift times</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/timing_post-processor/>Timing Post-Processor</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/kanji_timer/>Kanji Timer</a></li></ul><h3>Automation</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/>Overview</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/karaoke_templater/>Karaoke Templater</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/lua/>Lua Reference</a></li></ul><h3>Miscellaneous</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/options/>Aegisub Options</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/properties/>Script Properties</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/attachment_manager/>Attachment Manager</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/commands/>Commands</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#progress-reporting>Progress reporting</a><ul><li><a href=#aegisubprogressset>aegisub.progress.set</a></li><li><a href=#aegisubprogresstask>aegisub.progress.task</a></li><li><a href=#aegisubprogresstitle>aegisub.progress.title</a></li><li><a href=#aegisubprogressis_cancelled>aegisub.progress.is_cancelled</a></li></ul></li><li><a href=#debug-output>Debug output</a><ul><li><a href=#aegisubdebugout>aegisub.debug.out</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1></h1><p class=lead></p><p>There functions are used to report various status and progress back to the GUI
while a script is running.</p><h2 id=progress-reporting>Progress reporting<a href=#progress-reporting class=anchor aria-hidden=true>#</a></h2><p>A progress dialogue box is always shown when an Automation 4 Lua script is
running. You can use these functions to control what is displayed in it.</p><h3 id=aegisubprogressset>aegisub.progress.set<a href=#aegisubprogressset class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>aegisub.progress.set(percent)</code></p><p>Set the position of the percent-done bar in the progress window.</p><dl><dt><strong><code>percent</code></strong> (<code>number</code>)</dt><dd>Number from 0 to 100.</dd></dl><h3 id=aegisubprogresstask>aegisub.progress.task<a href=#aegisubprogresstask class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>aegisub.progress.task(msg, ...)</code></p><p>Set the &ldquo;task&rdquo; text in the progress window, which is the small text below the
progress bar showing what the script is currently doing.</p><dl><dt><strong><code>msg</code></strong> (<code>string</code>)</dt><dd>A format string specifying the message. See the Lua standard string library
<code>string.format</code> function for details on format strings.</dd><dt><strong><code>...</code></strong></dt><dd>Parameters to the format string.</dd></dl><h3 id=aegisubprogresstitle>aegisub.progress.title<a href=#aegisubprogresstitle class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>aegisub.progress.title(title, ...)</code></p><p>Set the title of the progress window, which is is the large text displayed
above the progress bar. This text should usually not change while the script
is running. By default this is set to the name of the macro running.</p><dl><dt><strong><code>title</code></strong> (<code>string</code>)</dt><dd>A format string specifying the title. See the Lua standard string library
<code>string.format</code> function for details on format strings.
<strong><code>...</code></strong></dd><dd>Parameters to the format string.</dd></dl><h3 id=aegisubprogressis_cancelled>aegisub.progress.is_cancelled<a href=#aegisubprogressis_cancelled class=anchor aria-hidden=true>#</a></h3><p>Synopsis: <code>cancelled = aegisub.progress.is_cancelled()</code></p><p>Tells whether the user has clicked on the Cancel button.</p><p>You should call this function regularly during long operations, and if it&rsquo;s
true call <a href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/lua/miscellaneous_apis/#aegisub.cancel><code>aegisub.cancel()</code></a> to
rollback all changes and immediately end execution of the script.</p><dl><dt><strong><code>cancelled</code></strong> (<code>boolean</code>)</dt><dd><code>false</code> if the user has not clicked the Cancel button, <code>true</code> if the user has
clicked Cancel. If <code>is_cancelled</code> returns <code>true</code> all subsequent calls to it in
the current execution will also return <code>true</code>.</dd></dl><h2 id=debug-output>Debug output<a href=#debug-output class=anchor aria-hidden=true>#</a></h2><p>The primary support for script debugging in Automation 4 Lua is through sending
debug messages to the message log integrated in the progress window.</p><p>If a script shows a debug or other message, the progress window stays open
after the script has finished running until the user clicks the Close button.
Please consider whether it&rsquo;s really that important that the user sees your
messages. Blocking other input to the program to display something that might
be irrelevant to the user can create a bad experience.</p><h3 id=aegisubdebugout>aegisub.debug.out<a href=#aegisubdebugout class=anchor aria-hidden=true>#</a></h3><p>Synopsis:</p><ul><li><code>aegisub.debug.out(msg, ...)</code></li><li><code>aegisub.debug.out(level, msg, ...)</code></li><li><code>aegisub.log(msg, ...)</code></li><li><code>aegisub.log(level, msg, ...)</code></li></ul><p>The two names are synonymous; you can use either name depending on your
preference.</p><p>Sends a message to the message log, optionally with a specific severity level.
The user can control in Aegisub&rsquo;s options the highest level messages that will
be shown.</p><dl><dt><strong><code>level</code></strong> (<code>number</code>)</dt><dd>Severity level of the message. This parameter is optional. If you leave it
out (by entirely skipping it) the message will always be shown.</dd><dt><strong><code>msg</code></strong> (<code>string</code>)</dt><dd>A format string specifying the message. See the Lua standard string library
<code>string.format</code> function for details on format strings.</dd><dt><strong><code>...</code></strong></dt><dd>Parameters to the format string.</dd></dl><p>The following severity levels are suggested:</p><dl><dt>0: &ldquo;fatal&rdquo;</dt><dd>Something really bad happened and the script can&rsquo;t continue. Level 0 messages
are always shown. Note that Aegisub does not automatically terminate your
script. Call <a href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/lua/miscellaneous_apis/#aegisub.cancel><code>aegisub.cancel()</code></a>
afterwards if you want it to.</dd><dt>1: &ldquo;error&rdquo;</dt><dd>A real error occurred so the user should expect something to have gone wrong
even though you tried to recover. A fatal error might happen later.</dd><dt>2: &ldquo;warning&rdquo;</dt><dd>It looks like something is wrong and the user ought to know because it might
mean something needs to be fixed.</dd><dt>3: &ldquo;hint&rdquo;</dt><dd>A tip or otherwise on how the user can improve things, or hints that
something might cause a warning or error later on.</dd><dt>4: &ldquo;debug&rdquo;</dt><dd>Information meant to help fix errors in the script, such as dumps of variable
contents.</dd><dt>5: &ldquo;trace&rdquo;</dt><dd>Extremely verbose information about what the script is doing, such as a
message for each single step done with lots of variable dumps.</dd></dl><p>{::template name=&ldquo;automation_navbox&rdquo; /}</p><div class="docs-navigation d-flex justify-content-between"><a href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/lua/modules/util/><div class="card my-1"><div class="card-body py-2">&larr;</div></div></a><a class=ms-auto href=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/automation/lua/registration/><div class="card my-1"><div class="card-body py-2">&rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://www.networkredux.com/>NetworkRedux</a>, <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=https://aeg-dev.github.io/AegiSite/zh-cn/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=https://aeg-dev.github.io/AegiSite/js/highlight.min.f80b63ab0a29882dba84d0df18b9afe2e098d916b22007769c8fab9ba080a0b96a6d6c87bff561e64a9b5dde421d934ffe8aee085500f18d8aa183c6294e72bd.js integrity="sha512-+AtjqwopiC26hNDfGLmv4uCY2RayIAd2nI+rm6CAoLlqbWyHv/Vh5kqbXd5CHZNP/oruCFUA8Y2KoYPGKU5yvQ==" crossorigin=anonymous defer></script>
<script src=https://aeg-dev.github.io/AegiSite/main.min.12763ab77eb1a8341afa7dfe9efaa3762a502b8e20262a7bcd0e713140eb441763122246616148895d4dd3da0e15f060137eb3b9334894fa4c74ebec6dc576b0.js integrity="sha512-EnY6t36xqDQa+n3+nvqjdipQK44gJip7zQ5xMUDrRBdjEiJGYWFIiV1N09oOFfBgE36zuTNIlPpMdOvsbcV2sA==" crossorigin=anonymous defer></script></body></html>