<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://aeg-dev.github.io/AegiSite/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://aeg-dev.github.io/AegiSite/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://aeg-dev.github.io/AegiSite/main.fc46d0020a9269a024ea53df510d38f766cc24019f517eb6b1e7ab3103c45ca81be58a73611a71f5045aa47fa64258ba9fdcb0f602f0a59e72e73ae8c1981886.css integrity="sha512-/EbQAgqSaaAk6lPfUQ0492bMJAGfUX62seerMQPEXKgb5YpzYRpx9QRapH+mQli6n9yw9gLwpZ5y5zrowZgYhg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>- Aegisub</title><meta name=description content="Aegisub is a free, cross-platform open source tool for creating and modifying subtitles. Aegisub makes it quick and easy to time subtitles to audio, and features many powerful tools for styling them, including a built-in real-time video preview."><link rel=canonical href=https://aeg-dev.github.io/AegiSite/docs/3.2/furigana_karaoke/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/doks.png"><meta name=twitter:title content><meta name=twitter:description content="Furigana (in Aegisub often shortened to furi) refers to little phonetic guide characters written along the main text in Japanese, specifically using the hiragana phonetic alphabet to describe how the ideographic kanji characters should be pronounced. Putting smaller text next to a main line of text is in general referred to as ruby text, but since the implementation discussed here is designed specifically with Japanese furigana in mind, the ruby text is also referred to as furigana everywhere."><meta name=twitter:site content="@henkverlinde"><meta name=twitter:creator content="@henkverlinde"><meta property="og:title" content><meta property="og:description" content="Furigana (in Aegisub often shortened to furi) refers to little phonetic guide characters written along the main text in Japanese, specifically using the hiragana phonetic alphabet to describe how the ideographic kanji characters should be pronounced. Putting smaller text next to a main line of text is in general referred to as ruby text, but since the implementation discussed here is designed specifically with Japanese furigana in mind, the ruby text is also referred to as furigana everywhere."><meta property="og:type" content="article"><meta property="og:url" content="/docs/3.2/furigana_karaoke/"><meta property="og:image" content="/doks.png"><meta property="og:site_name" content="Aegisub"><meta property="article:publisher" content="https://www.facebook.com/verlinde.henk"><meta property="article:author" content="https://www.facebook.com/verlinde.henk"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/aeg-dev.github.io\/AegiSite\/"},{"@type":"ListItem","position":3,"name":"Docs","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/docs\/"},{"@type":"ListItem","position":4,"name":"3.2","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/docs\/3.2\/"},{"@type":"ListItem","position":5,"name":"Furigana Karaoke","item":"https:\/\/aeg-dev.github.io\/AegiSite\/\/docs\/3.2\/furigana_karaoke\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://aeg-dev.github.io/AegiSite/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://aeg-dev.github.io/AegiSite/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://aeg-dev.github.io/AegiSite/favicon-16x16.png><link rel=manifest href=https://aeg-dev.github.io/AegiSite/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=https://aeg-dev.github.io/AegiSite/>Aegisub</a><div class="order-1 order-md-3"><div class=input-group><select class=custom-select id=inputGroupSelect-language-switching onchange="location=this.value"><option id=en value=https://aeg-dev.github.io/AegiSite/docs/3.2/furigana_karaoke/ selected>English</option><option id=zh-cn value=https://aeg-dev.github.io/AegiSite/zh-cn/docs/3.2/furigana_karaoke/>简体中文</option></select></div></div><button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/Aegisub/Aegisub><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2 text-nowrap"><li class=nav-item><a class=nav-link href=https://aeg-dev.github.io/AegiSite/downloads/main/>Downloads</a></li><li class="nav-item active"><a class=nav-link href=https://aeg-dev.github.io/AegiSite/docs/>Docs</a></li><li class=nav-item><a class=nav-link href=https://github.com/Aegisub/Aegisub/issues>Bug Tracker</a></li><li class=nav-item><a class=nav-link href=https://aeg-dev.github.io/AegiSite/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=http://blog.aegisub.org/>Old News</a></li></ul><div class="break order-6 d-md-none"></div></div></div></header><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Navigation</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/main_page/>Main Page</a></li></ul><h3>Introduction</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/about/>What is Aegisub?</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/highlights/>Highlights</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/credits/>Credits</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/support/>Support Aegisub</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/faq/>FAQ</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/tutorials/>Tutorials</a></li></ul><h3>Working with Subtitles</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/editing_subtitles/>Editing Subtitles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/exporting/>Exporting Subtitles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/attaching_subtitles_to_video/>Applying Subtitles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/spell_checker/>Spell Checker</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/translation_assistant/>Translation Assistant</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/paste_over/>Paste Over</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/select_lines/>Select Lines</a></li></ul><h3>Typesetting</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/typesetting/>Typesetting Introduction</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/video/>Working with Video</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/styles/>Editing styles</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/visual_typesetting/>Visual Typesetting</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/ass_tags/>ASS Override Tags</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/colour_picker/>Colour Picker</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/styling_assistant/>Styling Assistant</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/resolution_resampler/>Resolution Resampler</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/fonts_collector/>Fonts Collector</a></li></ul><h3>Timing</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/audio/>Working with Audio</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/timing/>Timing subtitles to audio</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/shift_times/>Shift times</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/timing_post-processor/>Timing Post-Processor</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/kanji_timer/>Kanji Timer</a></li></ul><h3>Automation</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/>Overview</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/karaoke_templater/>Karaoke Templater</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/lua/>Lua Reference</a></li></ul><h3>Miscellaneous</h3><ul class=list-unstyled><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/options/>Aegisub Options</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/properties/>Script Properties</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/attachment_manager/>Attachment Manager</a></li><li><a class=docs-link href=https://aeg-dev.github.io/AegiSite/docs/3.2/commands/>Commands</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#multi-highlight-syntax>Multi-highlight syntax</a></li><li><a href=#basic-furigana>Basic furigana</a></li><li><a href=#controlling-the-layout>Controlling the layout</a></li><li><a href=#summary>Summary</a></li><li><a href=#usage-in-karaoke-templater>Usage in Karaoke Templater</a></li><li><a href=#usage-in-lua-scripts>Usage in Lua scripts</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1></h1><p class=lead></p><p><img src=https://aeg-dev.github.io/AegiSite/img/3.2/Furigana-demo-1.png alt=Furigana-demo-1></p><p><em>Furigana</em> (in Aegisub often shortened to <em>furi</em>) refers to little phonetic
guide characters written along the main text in Japanese, specifically using
the hiragana phonetic alphabet to describe how the ideographic kanji characters
should be pronounced. Putting smaller text next to a main line of text is in
general referred to as <a href=http://en.wikipedia.org/wiki/Ruby_character><em>ruby
text</em></a>, but since the
implementation discussed here is designed specifically with Japanese furigana
in mind, the ruby text is also referred to as furigana everywhere.</p><p>None of the subtitle formats Aegisub supports natively support ruby text or
furigana, however the <a href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/lua/modules/karaskel.lua/>karaskel</a> standard include
implements an algorithm that can create basic furigana layouts by calculating
the position of every individual character.</p><p>This page describes the syntax the Automation 4 karaskel.lua script understands
for furigana text, and how to use the layout information it calculates to
actually create positioned characters.</p><p><a href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/karaoke_templater/>Karaoke Templater</a> also implements support for
furigana using the karaskel.lua algorithm and syntax.</p><p>It&rsquo;s important to note that the syntax is designed for karaoke, and revolves
around <a href=https://aeg-dev.github.io/AegiSite/docs/3.2/karaoke_timing_tutorial/>karaoke timed</a> text. It isn&rsquo;t suited for typesetting
regular text (e.g. dialogue lines) with general purpose ruby text. A more
elaborate syntax and more complex layout engine would be required for that.</p><h2 id=multi-highlight-syntax>Multi-highlight syntax<a href=#multi-highlight-syntax class=anchor aria-hidden=true>#</a></h2><p>A prerequisite for an integral part of the furigana syntax is the
multi-highlight syntax.</p><p>If you make the text of a syllable a number sign (#, ASCII 35, Unicode U+0023)
that syllable will &ldquo;join&rdquo; with the previous one: The number sign is removed and
the timing of the two syllables are added together, producing just one
syllable. You can have multiple number sign syllables in a row, adding up
multiple timings in that way.</p><p>The timings of the individual number sign syllables are still stored in the
<a href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/lua/modules/karaskel.lua/#highlighttable>highlight table</a> of the
generated syllable structure, but the main timing (<code>start_time</code> and <code>end_time</code>)
of the syllable structure reflects only the added-together timings of the
number sign syllables.</p><div class=card><strong class=card-header>Example</strong><div class=card-body><p>This line shows how multi-highlight syntax is used to mark up kanji and groups
of kanji that cover multiple syllables:</p><pre><code>{\k5}明日{\k10}#{\k5}#{\k10}ま{\k7}た{\k10}会{\k4}う{\k6}時{\k14}#
</code></pre><p>It generates the following syllable structures:</p><table class=karatable><tr><th>Text</th><th>Syllable duration</th><th>Highlight durations</th></tr><tr><td rowspan=3>明日</td><td rowspan=3>20</td><td>5</td></tr><tr><td>10</td></tr><tr><td>5</td></tr><tr><td>ま</td><td>10</td><td>10</td></tr><tr><td>た</td><td>7</td><td>7</td></tr><tr><td>会</td><td>10</td><td>10</td></tr><tr><td>う</td><td>4</td><td>4</td></tr><tr><td rowspan=2>時</td><td rowspan=2>20</td><td>6</td></tr><tr><td>14</td></tr></table></div></div><h2 id=basic-furigana>Basic furigana<a href=#basic-furigana class=anchor aria-hidden=true>#</a></h2><p>To add furigana to a syllable, you add a pipe character (|, ASCII 124, Unicode
U+007C) after the main syllable text, and then add the furigana text after the
pipe. You can also add furigana to repeat-syllables (number sign syllables for
multi-highlight) to have the furigana for a single main syllable span multiple
furigana syllables.</p><p>When multiple consecutive syllables all have furigana, the furigana for all of
those syllables are collected together and centered above the string of main
syllables they belong to. If the string of furigana is wider than the main text
the furigana is left-aligned with the main text. You can control this behaviour
with special control characters, see below.</p><div class=card><strong class=card-header>Example</strong><div class=card-body><p>Adding furigana to the example above:</p><pre><code>{\k5}明日|あ{\k10}#|し{\k5}#|た{\k10}ま{\k7}た{\k10}会|あ{\k4}う{\k6}時|と{\k14}#|き
</code></pre><p>The following syllables, highlights and furigana are produced:</p><table class=karatable><tr><th>Text</th><th>Syllable duration</th><th>Highlight/furigana durations</th><th>Furigana</th></tr><tr><td rowspan=3>明日</td><td rowspan=3>20</td><td>5</td><td>あ</td></tr><tr><td>10</td><td>し</td></tr><tr><td>5</td><td>た</td></tr><tr><td>ま</td><td>10</td><td>10</td></tr><tr><td>た</td><td>7</td><td>7</td></tr><tr><td>会</td><td>10</td><td>10</td><td>あ</td></tr><tr><td>う</td><td>4</td><td>4</td></tr><tr><td rowspan=2>時</td><td rowspan=2>20</td><td>6</td><td>と</td></tr><tr><td>14</td><td>き</td></tr></table></div></div><h2 id=controlling-the-layout>Controlling the layout<a href=#controlling-the-layout class=anchor aria-hidden=true>#</a></h2><p>Often the layout produced with the plain furigana syntax isn&rsquo;t exactly what you
want, or maybe even plain misleading. Because of this, there&rsquo;s two special
characters that can be used to control how the furigana are laid out.</p><p>Both of these two special characters are placed before the first character of
the furigana of a syllable, i.e. right after the pipe character.</p><p>First is the exclamation mark (!, ASCII 33, Unicode U+0021) which marks a
&ldquo;sequence break&rdquo;. This acts as a kind of invisible divider that prevents the
furigana in this syllable from merging with that of the previous syllable. You
will usually use this when you have two adjacent kanji words that both have
furigana, but the furigana for them need to be separate. In that case, put the
exclamation mark as the first character in the furigana for the first syllable
of the second word.</p><p>The other special character is the less-than sign (&lt;, ASCII 60, Unicode U+003C)
which marks a &ldquo;sequence break with float-left&rdquo;. It has the same sequence break
semantics as the exclamation mark, but also changes the overflow behaviour.
When the furigana sequence starts with a less-than sign marked furigana
syllable is wider than the main text it applies to, it will always center above
the main text, even if it means it has to extend over the left edge of it.</p><p>In all cases, if two furigana sequences extend beyond their main text such that
they would overlap, the main text is moved such that the furigana won&rsquo;t
overlap.</p><div class=card><strong class=card-header>Example</strong><div class=card-body><p>Here is the same (rather contrived) sample text shown without layout control
and with each of the two layout control characters:</p><p>| <img src=https://aeg-dev.github.io/AegiSite/img/3.2/Furigana-demo-4.png alt=Furigana-demo-4> | <code>{\k10}</code>中|ちゅ<code>{\k10}</code>#|う<code>{\k10}</code>国|ご<code>{\k10}</code>#|く<br><code>{\k10}</code><u>魂|た</u><code>{\k10}</code>#|ま<code>{\k10}</code>#|し<code>{\k10}</code>#|い
| <img src=https://aeg-dev.github.io/AegiSite/img/3.2/Furigana-demo-3.png alt=Furigana-demo-3> | <code>{\k10}</code>中|ちゅ<code>{\k10}</code>#|う<code>{\k10}</code>国|ご<code>{\k10}</code>#|く<br><code>{\k10}</code><u>魂|!た</u><code>{\k10}</code>#|ま<code>{\k10}</code>#|し<code>{\k10}</code>#|い
| <img src=https://aeg-dev.github.io/AegiSite/img/3.2/Furigana-demo-2.png alt=Furigana-demo-2> | <code>{\k10}</code>中|ちゅ<code>{\k10}</code>#|う<code>{\k10}</code>国|ご<code>{\k10}</code>#|く<br><code>{\k10}</code><u>魂|&lt;た</u><code>{\k10}</code>#|ま<code>{\k10}</code>#|し<code>{\k10}</code>#|い</p><p>It <em>is</em> very hard to tell the difference between the two first as the
difference is only a few pixels, but it is there. In the first sample, the た
extends a bit over the left edge of 魂 and above 国 while it exactly
left-aligns with 魂 in the second. In the second, ちゅうごく is also centered
above 中国 while it isn&rsquo;t in the first.</p></div></div><h2 id=summary>Summary<a href=#summary class=anchor aria-hidden=true>#</a></h2><p>|&mdash;&mdash;|&mdash;&mdash;-|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;|&mdash;&mdash;&mdash;-</p><table><thead><tr><th style=text-align:center>Char</th><th style=text-align:center>ASCII</th><th>Unicode</th><th>Where</th><th>Meaning</th></tr></thead><tbody><tr><td style=text-align:center>#</td><td style=text-align:center>35</td><td>U+0023<br>U+FF03</td><td>Instead of main text</td><td>Extend previous syllable with another highlight</td></tr><tr><td style=text-align:center>|</td><td style=text-align:center>124</td><td>U+007C<br>U+FF5C</td><td>Between main text and furigana</td><td>Separate main text and furigana text of a syllable</td></tr><tr><td style=text-align:center>!</td><td style=text-align:center>33</td><td>U+0021<br>U+FF01</td><td>First character of furigana</td><td>Sequence break; prevent joining furigana for this syllable with furigana from previous syllable</td></tr><tr><td style=text-align:center>&lt;</td><td style=text-align:center>60</td><td>U+003C<br>U+FF1C</td><td>First character of furigana</td><td>Sequence break with float-left; prevent joining furigana for this syllable with furigana from previous syllable, but allow furigana to extend left of main text</td></tr><tr><td style=text-align:center>&mdash;&mdash;</td><td style=text-align:center>&mdash;&mdash;-</td><td>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</td><td>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</td><td>&mdash;&mdash;&mdash;-</td></tr><tr><td style=text-align:center>{:.karatable}</td><td></td><td></td><td></td><td></td></tr></tbody></table><p>Note that every special character can in fact be represented by two different
Unicode codepoints. The first is the regular character, corresponding to the
ASCII character, while the second (high) codepoint is the <em>full width</em> version
of the character. Often when using an IME (Input Method Editor) to edit
Japanese text it is easier to input text in full width mode than switching the
IME off to enter a single or two regular ASCII characters and switch it on
again. Therefore both the half width (ASCII) and full width versions of the
characters are accepted.</p><h2 id=usage-in-karaoke-templater>Usage in Karaoke Templater<a href=#usage-in-karaoke-templater class=anchor aria-hidden=true>#</a></h2><p>Furigana: <a href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/karaoke_templater/template_modifiers/#furi>The <em>furi</em> template class</a></p><p>Multi-highlight: <a href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/karaoke_templater/template_modifiers/#multi>The <em>multi</em> modifier</a></p><div class=card><strong class=card-header>Example</strong><div class=card-body><p>The examples used earlier on this page are all generated using this kara-templater snippet:</p><pre><code>Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,template syl,{\pos(!line.left+syl.center!,!line.middle!)\an5\k!syl.start_time/10!\k$kdur}
Comment: 0,0:00:00.00,0:00:00.00,Default,,0000,0000,0000,template furi,{\pos(!line.left+syl.center!,!line.middle-line.height!)\an5\k!syl.start_time/10!\k$kdur}
Comment: 0,0:00:00.00,0:00:02.00,Default,,0000,0000,0000,karaoke,{\k15}二|ふ{\k15}#|た{\k10}人|り{\k15}だ{\k57}け{\k5}の{\k6}地|ほ{\k5}球|し{\k8}で
Comment: 0,0:00:02.00,0:00:04.00,Default,,0000,0000,0000,karaoke,{\k10}中|ちゅ{\k10}#|う{\k10}国|ご{\k10}#|く{\k10}魂|&lt;た{\k10}#|ま{\k10}#|し{\k10}#|い
Comment: 0,0:00:04.00,0:00:06.00,Default,,0000,0000,0000,karaoke,{\k10}中|ちゅ{\k10}#|う{\k10}国|ご{\k10}#|く{\k10}魂|!た{\k10}#|ま{\k10}#|し{\k10}#|い
Comment: 0,0:00:06.00,0:00:08.00,Default,,0000,0000,0000,karaoke,{\k10}中|ちゅ{\k10}#|う{\k10}国|ご{\k10}#|く{\k10}魂|た{\k10}#|ま{\k10}#|し{\k10}#|い
</code></pre><p>The font used in MS PMincho 30 pt with the furigana being 15 pt.</p></div></div><h2 id=usage-in-lua-scripts>Usage in Lua scripts<a href=#usage-in-lua-scripts class=anchor aria-hidden=true>#</a></h2><p>It&rsquo;s all in <a href=https://aeg-dev.github.io/AegiSite/docs/3.2/automation/lua/modules/karaskel.lua/>karaskel</a>.</p><p>Furigana layout is automatically invoked by <code>karaskel.preproc_line_pos</code> if a
furigana style exists for a line main style. The furigana style for a main
style is a style with the same name, except <code>-furigana</code> appended to the name.
E.g. the furigana style of <code>Default</code> is <code>Default-furigana</code>.</p><p>Karaskel can generate automatic furigana styles if the <code>generate_furigana</code>
argument (second) to the <code>karaskel.collect_head</code> function is <code>true</code>. Automatic
furigana styles are identical to the main style they&rsquo;re based on, except the
font size is halved.</p><p>Furigana syllables are stored in <code>line.furi</code> and follows the same format as
regular syllables. You have to remember setting the style of the lines you
generate to the furigana style.</p><p>Multi-highlights are always processed even when furigana layout isn&rsquo;t done.
Multi-highlight data are stored in <code>syl.highlights</code>.</p><div class="alert alert-warning" role=alert><strong>TODO: </strong>more details</div><p>{::template name=&ldquo;automation_navbox&rdquo; /}</p><div class="docs-navigation d-flex justify-content-between"><a href=https://aeg-dev.github.io/AegiSite/docs/3.2/fix_timing_tutorial/><div class="card my-1"><div class="card-body py-2">&larr;</div></div></a><a class=ms-auto href=https://aeg-dev.github.io/AegiSite/docs/3.2/glossary/automation_script_feature/><div class="card my-1"><div class="card-body py-2">&rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://www.networkredux.com/>NetworkRedux</a>, <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=https://aeg-dev.github.io/AegiSite/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=https://aeg-dev.github.io/AegiSite/js/highlight.min.23f16da133548e29aa8de3077755353b92ab613aeb6543a7f26b0e897536bde8c6fe45e68ef6d13d6de184f6b7199e781aaebd156dbcaacd50e849b8b2ec0991.js integrity="sha512-I/FtoTNUjimqjeMHd1U1O5KrYTrrZUOn8msOiXU2vejG/kXmjvbRPW3hhPa3GZ54Gq69FW28qs1Q6Em4suwJkQ==" crossorigin=anonymous defer></script><script src=https://aeg-dev.github.io/AegiSite/main.min.505537b7832094f26c2d992c19e4be58edeff89a06181f4d11014a70272248d7cf88207c6280fac6fe716222c87fac808facea1864f858fce580ac640684b4b6.js integrity="sha512-UFU3t4MglPJsLZksGeS+WO3v+JoGGB9NEQFKcCciSNfPiCB8YoD6xv5xYiLIf6yAj6zqGGT4WPzlgKxkBoS0tg==" crossorigin=anonymous defer></script></body></html>